# StressMind - Visual Architecture Guide

**For Understanding How Everything Connects**

This document provides visual diagrams and explanations of the complete system architecture.

---

## Complete System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER'S iPHONE                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  SwiftUI USER INTERFACE                      â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  â”‚
â”‚  â”‚  â”‚Home â”‚  â”‚Mood â”‚  â”‚Skillâ”‚  â”‚ Med  â”‚  â”‚Contact â”‚          â”‚  â”‚
â”‚  â”‚  â”‚View â”‚  â”‚ Viewâ”‚  â”‚ Viewâ”‚  â”‚ View â”‚  â”‚  View  â”‚          â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜          â”‚  â”‚
â”‚  â”‚     â”‚        â”‚        â”‚         â”‚         â”‚                â”‚  â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚  â”‚
â”‚  â”‚                        â”‚                                    â”‚  â”‚
â”‚  â”‚                        â”‚ User Actions (tap, swipe, type)   â”‚  â”‚
â”‚  â”‚                        â–¼                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚               BUSINESS LOGIC LAYER                          â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚    â”‚   DataManager      â”‚      â”‚ ParentalSharing     â”‚     â”‚  â”‚
â”‚  â”‚    â”‚   (Singleton)      â”‚      â”‚ Manager (Singleton) â”‚     â”‚  â”‚
â”‚  â”‚    â”‚                    â”‚      â”‚                     â”‚     â”‚  â”‚
â”‚  â”‚    â”‚ â€¢ Add/Edit/Delete  â”‚      â”‚ â€¢ Generate Summary  â”‚     â”‚  â”‚
â”‚  â”‚    â”‚ â€¢ Encrypt/Decrypt  â”‚      â”‚ â€¢ Calculate Trends  â”‚     â”‚  â”‚
â”‚  â”‚    â”‚ â€¢ Load/Save Data   â”‚      â”‚ â€¢ Privacy Controls  â”‚     â”‚  â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â”‚              â”‚                             â”‚                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                 â”‚                             â”‚                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         ENCRYPTION LAYER (CryptoKit)       â”‚                â”‚  â”‚
â”‚  â”‚                                            â”‚                â”‚  â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚                â”‚  â”‚
â”‚  â”‚    â”‚  AES-256-GCM       â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚  â”‚
â”‚  â”‚    â”‚  Encryption        â”‚                                  â”‚  â”‚
â”‚  â”‚    â”‚  â€¢ Seal (encrypt)  â”‚                                  â”‚  â”‚
â”‚  â”‚    â”‚  â€¢ Open (decrypt)  â”‚                                  â”‚  â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚  â”‚
â”‚  â”‚              â”‚                                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                 â”‚                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         DATA STORAGE LAYER                                  â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚    â”‚   UserDefaults     â”‚         â”‚   iOS Keychain     â”‚   â”‚  â”‚
â”‚  â”‚    â”‚  (Encrypted Data)  â”‚         â”‚ (Encryption Key)   â”‚   â”‚  â”‚
â”‚  â”‚    â”‚                    â”‚         â”‚                    â”‚   â”‚  â”‚
â”‚  â”‚    â”‚ â€¢ Mood Entries     â”‚         â”‚  ğŸ”‘ SymmetricKey   â”‚   â”‚  â”‚
â”‚  â”‚    â”‚ â€¢ Emergency Contactâ”‚         â”‚     (AES-256)      â”‚   â”‚  â”‚
â”‚  â”‚    â”‚ â€¢ Settings         â”‚         â”‚                    â”‚   â”‚  â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â€¢ Protected by    â”‚   â”‚  â”‚
â”‚  â”‚                                    â”‚    device passcode â”‚   â”‚  â”‚
â”‚  â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                          â”‚
         â”‚ Phone Calls                              â”‚ No Internet
         â”‚ (tel://, sms://)                         â”‚ Connection!
         â–¼                                          â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
    â”‚  988   â”‚                                      â”‚
    â”‚ Crisis â”‚                                      â”‚
    â”‚Hotline â”‚                                      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
```

---

## Data Flow: Saving a Mood Entry

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 1: User Interaction                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        Teen opens app
             â†“
        Taps "Mood" tab
             â†“
        MoodTrackerView appears
             â†“
        Taps "+ Add Mood" button
             â†“
        AddMoodView sheet opens


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 2: User Input                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        Selects: ğŸ˜° Stressed
             â†“
        Types note: "Big test tomorrow"
             â†“
        Selects tags: [School, Sleep]
             â†“
        Taps "Save" button


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 3: Data Creation (in AddMoodView)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        let entry = MoodEntry(
            id: UUID(),                    // Auto-generated
            date: Date(),                  // Current time
            mood: .stressed,               // User's selection
            note: "Big test tomorrow",     // User's input
            tags: ["School", "Sleep"]      // User's selections
        )


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 4: Pass to Business Logic (DataManager)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        dataManager.addMoodEntry(entry)
             â†“
        // Inside DataManager:
        func addMoodEntry(_ entry: MoodEntry) {
            // 1. Add to in-memory array
            moodEntries.insert(entry, at: 0)

            // 2. Save to persistent storage
            saveMoodEntries()
        }


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 5: Encryption Process                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        private func saveMoodEntries() {
            // 1. Convert to JSON
            let data = try JSONEncoder().encode(moodEntries)
            // data = {"id":"123","date":"2026-02-16",...}

            // 2. Encrypt with AES-256
            let encryptedData = try encrypt(data)
            // encryptedData = [encrypted binary bytes]

            // 3. Save to UserDefaults
            UserDefaults.standard.set(encryptedData, forKey: "moodEntries")
        }


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 6: Storage                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      UserDefaults            â”‚
        â”‚  (iPhone's Local Storage)    â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚                              â”‚
        â”‚ Key: "moodEntries"           â”‚
        â”‚ Value: [encrypted bytes]     â”‚
        â”‚        â†“                     â”‚
        â”‚    Unreadable without key!   â”‚
        â”‚                              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 7: UI Update (SwiftUI Magic)                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        @Published var moodEntries changed
             â†“
        SwiftUI automatically re-renders MoodTrackerView
             â†“
        New mood entry appears in list
             â†“
        Sheet closes
             â†“
        Teen sees their new entry!
```

---

## Encryption Deep Dive

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ENCRYPTION PROCESS                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 1: Generate or Retrieve Encryption Key (Once, on first launch)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                   â”‚
â”‚  App First Launch:                                               â”‚
â”‚    1. Check iOS Keychain for existing key                        â”‚
â”‚    2. If not found:                                              â”‚
â”‚       â€¢ Generate new 256-bit symmetric key                       â”‚
â”‚       â€¢ Store in Keychain (secure hardware storage)             â”‚
â”‚    3. If found:                                                  â”‚
â”‚       â€¢ Retrieve key from Keychain                               â”‚
â”‚                                                                   â”‚
â”‚  Keychain Entry:                                                 â”‚
â”‚    Service: "com.stressmind.encryptionKey"                       â”‚
â”‚    Account: "encryption"                                         â”‚
â”‚    Data: [256-bit symmetric key]                                 â”‚
â”‚    Access: Protected by device passcode/biometrics              â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


STEP 2: Encrypt Data Before Saving
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                   â”‚
â”‚  Plain Text Data:                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ {                                          â”‚                 â”‚
â”‚  â”‚   "id": "abc-123",                         â”‚                 â”‚
â”‚  â”‚   "date": "2026-02-16T14:30:00Z",          â”‚                 â”‚
â”‚  â”‚   "mood": "Stressed",                      â”‚                 â”‚
â”‚  â”‚   "note": "Big test tomorrow",             â”‚                 â”‚
â”‚  â”‚   "tags": ["School", "Sleep"]              â”‚                 â”‚
â”‚  â”‚ }                                          â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚            â”‚                                                     â”‚
â”‚            â”‚ JSONEncoder                                         â”‚
â”‚            â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ Binary JSON Data                           â”‚                 â”‚
â”‚  â”‚ [0x7B, 0x22, 0x69, 0x64, ...]             â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚            â”‚                                                     â”‚
â”‚            â”‚ + Encryption Key (from Keychain)                   â”‚
â”‚            â”‚ + AES-256-GCM Algorithm                            â”‚
â”‚            â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ Encrypted Data (Sealed Box)                â”‚                 â”‚
â”‚  â”‚ [0x4F, 0x3A, 0x9B, 0x7C, ...]             â”‚                 â”‚
â”‚  â”‚     â†‘                                      â”‚                 â”‚
â”‚  â”‚     â””â”€ Completely unreadable gibberish     â”‚                 â”‚
â”‚  â”‚        without the encryption key!         â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚            â”‚                                                     â”‚
â”‚            â”‚ Store in UserDefaults                              â”‚
â”‚            â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ Persistent Storage                         â”‚                 â”‚
â”‚  â”‚ Key: "moodEntries"                         â”‚                 â”‚
â”‚  â”‚ Value: [encrypted bytes]                   â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


STEP 3: Decrypt Data When Reading
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                   â”‚
â”‚  Retrieve from UserDefaults:                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ Encrypted Data                             â”‚                 â”‚
â”‚  â”‚ [0x4F, 0x3A, 0x9B, 0x7C, ...]             â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚            â”‚                                                     â”‚
â”‚            â”‚ + Encryption Key (from Keychain)                   â”‚
â”‚            â”‚ + AES-256-GCM Algorithm                            â”‚
â”‚            â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ Decrypted Binary Data                      â”‚                 â”‚
â”‚  â”‚ [0x7B, 0x22, 0x69, 0x64, ...]             â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚            â”‚                                                     â”‚
â”‚            â”‚ JSONDecoder                                         â”‚
â”‚            â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ MoodEntry Object                           â”‚                 â”‚
â”‚  â”‚ {                                          â”‚                 â”‚
â”‚  â”‚   id: "abc-123",                           â”‚                 â”‚
â”‚  â”‚   date: Date(2026-02-16),                  â”‚                 â”‚
â”‚  â”‚   mood: .stressed,                         â”‚                 â”‚
â”‚  â”‚   note: "Big test tomorrow",               â”‚                 â”‚
â”‚  â”‚   tags: ["School", "Sleep"]                â”‚                 â”‚
â”‚  â”‚ }                                          â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚            â”‚                                                     â”‚
â”‚            â”‚ Display in SwiftUI                                 â”‚
â”‚            â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ User sees their mood entry!                â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


SECURITY BENEFITS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                   â”‚
â”‚  âœ… Even if someone steals the phone:                            â”‚
â”‚     â€¢ Can't read encrypted data without passcode/Face ID         â”‚
â”‚     â€¢ Encryption key protected by iOS Secure Enclave            â”‚
â”‚                                                                   â”‚
â”‚  âœ… Even if someone extracts UserDefaults:                       â”‚
â”‚     â€¢ Data is gibberish without encryption key                   â”‚
â”‚     â€¢ Would take billions of years to crack AES-256             â”‚
â”‚                                                                   â”‚
â”‚  âœ… Even if someone clones the storage:                          â”‚
â”‚     â€¢ Encryption key stays on original device                    â”‚
â”‚     â€¢ Cloned data is useless without key                        â”‚
â”‚                                                                   â”‚
â”‚  âŒ Only way to decrypt:                                         â”‚
â”‚     â€¢ Have the physical device                                   â”‚
â”‚     â€¢ Know the passcode/have Face ID                            â”‚
â”‚     â€¢ App must be running with correct key from Keychain        â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## MVVM Architecture Visualization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            USER                                     â”‚
â”‚                     (Teenager using app)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ Interactions: tap, swipe, type
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          VIEW                                       â”‚
â”‚                    (What user sees)                                 â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ HomeView   â”‚  â”‚ MoodView   â”‚  â”‚ SkillsView â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚        â”‚               â”‚               â”‚                           â”‚
â”‚        â”‚  Displays     â”‚  Displays     â”‚  Displays                 â”‚
â”‚        â”‚  data from    â”‚  data from    â”‚  data from                â”‚
â”‚        â”‚  ViewModel    â”‚  ViewModel    â”‚  static data              â”‚
â”‚        â”‚               â”‚               â”‚                           â”‚
â”‚        â”‚  Sends        â”‚  Sends        â”‚  Sends                    â”‚
â”‚        â”‚  actions      â”‚  actions      â”‚  actions                  â”‚
â”‚        â”‚  to ViewModel â”‚  to ViewModel â”‚  to ViewModel             â”‚
â”‚        â”‚               â”‚               â”‚                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚               â”‚               â”‚
         â”‚               â”‚               â”‚
         â–¼               â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      VIEW MODEL                                     â”‚
â”‚                   (Business logic)                                  â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚          DataManager (Singleton)                     â”‚          â”‚
â”‚  â”‚                                                      â”‚          â”‚
â”‚  â”‚  @Published var moodEntries: [MoodEntry]            â”‚          â”‚
â”‚  â”‚  @Published var emergencyContacts: [Contact]        â”‚          â”‚
â”‚  â”‚                                                      â”‚          â”‚
â”‚  â”‚  Methods:                                           â”‚          â”‚
â”‚  â”‚  â€¢ func addMoodEntry(_ entry)                       â”‚          â”‚
â”‚  â”‚  â€¢ func deleteMoodEntry(_ entry)                    â”‚          â”‚
â”‚  â”‚  â€¢ func addContact(_ contact)                       â”‚          â”‚
â”‚  â”‚  â€¢ func encrypt(_ data)                             â”‚          â”‚
â”‚  â”‚  â€¢ func decrypt(_ data)                             â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                     â”‚                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ Operates on
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MODEL                                       â”‚
â”‚                    (Data structures)                                â”‚
â”‚                                                                     â”‚
â”‚  struct MoodEntry {                                                â”‚
â”‚      var id: UUID                                                  â”‚
â”‚      var date: Date                                                â”‚
â”‚      var mood: MoodType                                            â”‚
â”‚      var note: String                                              â”‚
â”‚      var tags: [String]                                            â”‚
â”‚  }                                                                 â”‚
â”‚                                                                     â”‚
â”‚  struct EmergencyContact {                                         â”‚
â”‚      var id: UUID                                                  â”‚
â”‚      var name: String                                              â”‚
â”‚      var phone: String                                             â”‚
â”‚      var note: String                                              â”‚
â”‚  }                                                                 â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ Persisted in
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PERSISTENCE                                      â”‚
â”‚               (Storage on device)                                   â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚    UserDefaults         â”‚    â”‚    iOS Keychain         â”‚       â”‚
â”‚  â”‚  (Encrypted Data)       â”‚    â”‚  (Encryption Key)       â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


EXAMPLE FLOW: Teen adds mood entry

1. VIEW: Teen taps "Save" on AddMoodView
         â†“
2. VIEW creates MODEL: new MoodEntry object
         â†“
3. VIEW calls VIEW MODEL: dataManager.addMoodEntry(entry)
         â†“
4. VIEW MODEL processes:
   â€¢ Adds to @Published moodEntries array
   â€¢ Encrypts data
   â€¢ Saves to UserDefaults
         â†“
5. VIEW MODEL notifies VIEW: @Published property changed
         â†“
6. VIEW automatically updates: SwiftUI re-renders
         â†“
7. Teen sees new entry in list!
```

---

## State Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  SwiftUI Reactive State                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

SCENARIO: Teen logs a new mood entry


Before Save:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     DataManager          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ moodEntries = [          â”‚
â”‚   Entry1,                â”‚
â”‚   Entry2                 â”‚
â”‚ ]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ @Published
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MoodTrackerView        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Displays:                â”‚
â”‚  â€¢ Entry1                â”‚
â”‚  â€¢ Entry2                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


User Saves New Entry:
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   dataManager            â”‚
â”‚   .addMoodEntry(entry3)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     DataManager          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ moodEntries = [          â”‚
â”‚   Entry3, â† NEW!         â”‚
â”‚   Entry1,                â”‚
â”‚   Entry2                 â”‚
â”‚ ]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ @Published triggers update
           â”‚ "Hey! My data changed!"
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MoodTrackerView        â”‚
â”‚   (Automatic Rebuild)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Displays:                â”‚
â”‚  â€¢ Entry3 â† NEW!         â”‚
â”‚  â€¢ Entry1                â”‚
â”‚  â€¢ Entry2                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


This happens automatically!
No manual UI refresh needed!
```

---

## File Structure Deep Dive

```
StressMind Xcode Project
â”‚
â”œâ”€â”€ StressMindApp.swift                    â† App Entry Point
â”‚   â”‚
â”‚   â””â”€â”€ @main                              "Start here when app launches"
â”‚       struct StressMindApp: App {
â”‚           var body: some Scene {
â”‚               WindowGroup {
â”‚                   ContentView()          â†’ Opens main view
â”‚               }
â”‚           }
â”‚       }
â”‚
â”œâ”€â”€ ContentView.swift                      â† Main Navigation
â”‚   â”‚
â”‚   â””â”€â”€ TabView                            "5 tabs at bottom of screen"
â”‚       â”œâ”€â”€ Tab 1: HomeView
â”‚       â”œâ”€â”€ Tab 2: MoodTrackerView
â”‚       â”œâ”€â”€ Tab 3: CopingSkillsView
â”‚       â”œâ”€â”€ Tab 4: MeditationView
â”‚       â””â”€â”€ Tab 5: EmergencyContactsView
â”‚
â”œâ”€â”€ Models/                                â† Data Structures
â”‚   â”‚
â”‚   â”œâ”€â”€ DataModels.swift
â”‚   â”‚   â””â”€â”€ Defines:
â”‚   â”‚       â€¢ struct MoodEntry
â”‚   â”‚       â€¢ struct EmergencyContact
â”‚   â”‚       â€¢ enum MoodType
â”‚   â”‚
â”‚   â””â”€â”€ ParentalSharingModels.swift
â”‚       â””â”€â”€ Defines:
â”‚           â€¢ struct ParentalSharingSettings
â”‚           â€¢ struct MoodSummary
â”‚           â€¢ struct EmergencyAlert
â”‚
â”œâ”€â”€ Services/                              â† Business Logic
â”‚   â”‚
â”‚   â”œâ”€â”€ DataManager.swift
â”‚   â”‚   â””â”€â”€ class DataManager: ObservableObject
â”‚   â”‚       â”œâ”€â”€ Singleton instance
â”‚   â”‚       â”œâ”€â”€ @Published properties
â”‚   â”‚       â”œâ”€â”€ CRUD operations
â”‚   â”‚       â”œâ”€â”€ Encryption/Decryption
â”‚   â”‚       â””â”€â”€ Persistence logic
â”‚   â”‚
â”‚   â””â”€â”€ ParentalSharingManager.swift
â”‚       â””â”€â”€ class ParentalSharingManager
â”‚           â”œâ”€â”€ Generate mood summaries
â”‚           â”œâ”€â”€ Calculate trends
â”‚           â”œâ”€â”€ Privacy controls
â”‚           â””â”€â”€ Emergency detection
â”‚
â””â”€â”€ Views/                                 â† User Interface
    â”‚
    â”œâ”€â”€ HomeView.swift                     "Crisis support screen"
    â”‚   â”œâ”€â”€ Panic button (988)
    â”‚   â”œâ”€â”€ Quick action buttons
    â”‚   â””â”€â”€ Settings button
    â”‚
    â”œâ”€â”€ MoodTrackerView.swift             "Mood journal"
    â”‚   â”œâ”€â”€ Add mood button
    â”‚   â”œâ”€â”€ Mood list
    â”‚   â””â”€â”€ AddMoodView (sheet)
    â”‚
    â”œâ”€â”€ CopingSkillsView.swift            "Coping techniques"
    â”‚   â”œâ”€â”€ Skills grid
    â”‚   â”œâ”€â”€ Search bar
    â”‚   â”œâ”€â”€ Category filters
    â”‚   â””â”€â”€ CopingSkillDetailView
    â”‚
    â”œâ”€â”€ MeditationView.swift              "Guided meditations"
    â”‚   â”œâ”€â”€ Meditation list
    â”‚   â”œâ”€â”€ Category filters
    â”‚   â””â”€â”€ MeditationDetailView (timer)
    â”‚
    â”œâ”€â”€ EmergencyContactsView.swift       "Personal contacts"
    â”‚   â”œâ”€â”€ Contact list
    â”‚   â”œâ”€â”€ Crisis hotlines
    â”‚   â”œâ”€â”€ AddEmergencyContactView
    â”‚   â””â”€â”€ EditEmergencyContactView
    â”‚
    â”œâ”€â”€ SettingsView.swift                "Settings & privacy"
    â”‚   â”œâ”€â”€ Parental sharing link
    â”‚   â”œâ”€â”€ Export data button
    â”‚   â”œâ”€â”€ Delete data button
    â”‚   â””â”€â”€ About section
    â”‚
    â””â”€â”€ ParentalSharingView.swift         "Optional sharing"
        â”œâ”€â”€ Enable/disable toggle
        â”œâ”€â”€ Summary generation
        â”œâ”€â”€ Share controls
        â””â”€â”€ ParentalSharingSetupView


COMMUNICATION FLOW:

Views â†â†’ ViewModels â†â†’ Models â†â†’ Storage
  â”‚          â”‚           â”‚          â”‚
  â”‚          â”‚           â”‚          â”œâ”€ UserDefaults
  â”‚          â”‚           â”‚          â””â”€ iOS Keychain
  â”‚          â”‚           â”‚
  â”‚          â”‚           â””â”€ MoodEntry, EmergencyContact structs
  â”‚          â”‚
  â”‚          â””â”€ DataManager, ParentalSharingManager classes
  â”‚
  â””â”€ HomeView, MoodTrackerView, etc. structs
```

---

## Memory & Performance Optimization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MEMORY MANAGEMENT                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Automatic Reference Counting (ARC):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  When object created:                                          â”‚
â”‚    Reference count = 1                                         â”‚
â”‚                                                                 â”‚
â”‚  When another variable references it:                          â”‚
â”‚    Reference count += 1                                        â”‚
â”‚                                                                 â”‚
â”‚  When reference removed:                                       â”‚
â”‚    Reference count -= 1                                        â”‚
â”‚                                                                 â”‚
â”‚  When reference count = 0:                                     â”‚
â”‚    Object automatically deallocated                            â”‚
â”‚    Memory freed                                                â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Example:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  var entry = MoodEntry(...)        // Reference count: 1       â”‚
â”‚  dataManager.moodEntries.append(entry) // Reference count: 2   â”‚
â”‚  entry = nil                       // Reference count: 1       â”‚
â”‚  // entry still exists in array                                â”‚
â”‚                                                                 â”‚
â”‚  dataManager.deleteMoodEntry(...)  // Reference count: 0       â”‚
â”‚  // Object automatically deallocated, memory freed             â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 PERFORMANCE OPTIMIZATIONS                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Lazy Loading Lists:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LazyVStack {                       â”‚
â”‚   ForEach(moodEntries) { entry in â”‚
â”‚     MoodEntryRow(entry)           â”‚
â”‚   }                                â”‚
â”‚ }                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â””â”€ Only renders visible rows
       Rows outside screen not created
       Scrolls smoothly even with 1000+ entries


2. Compiled Views:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ At Build Time:                     â”‚
â”‚   SwiftUI code â†’ Native code       â”‚
â”‚                                    â”‚
â”‚ At Runtime:                        â”‚
â”‚   Direct execution                 â”‚
â”‚   No interpretation needed         â”‚
â”‚   Native iOS performance           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


3. Efficient Data Structures:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Set vs Array for lookups:         â”‚
â”‚                                    â”‚
â”‚ var completedSteps: Set<Int>      â”‚
â”‚ // Lookup: O(1) constant time     â”‚
â”‚                                    â”‚
â”‚ vs                                 â”‚
â”‚                                    â”‚
â”‚ var completedSteps: [Int]         â”‚
â”‚ // Lookup: O(n) linear time       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


4. @Published Optimization:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Only views that use @Published     â”‚
â”‚ property are rebuilt               â”‚
â”‚                                    â”‚
â”‚ Example:                           â”‚
â”‚   moodEntries changes              â”‚
â”‚   â†’ Only MoodTrackerView rebuilds  â”‚
â”‚   â†’ HomeView not affected          â”‚
â”‚   â†’ Efficient!                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Security Layers Visualization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SECURITY ONION                                 â”‚
â”‚                 (Multiple Layers of Protection)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Layer 1: Device Security           â”‚
        â”‚  â€¢ Passcode / Face ID / Touch ID    â”‚
        â”‚  â€¢ Secure Enclave (hardware)        â”‚
        â”‚  â€¢ iOS sandboxing                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Layer 2: iOS Keychain              â”‚
        â”‚  â€¢ Stores encryption key            â”‚
        â”‚  â€¢ Protected by Secure Enclave      â”‚
        â”‚  â€¢ Requires device unlock           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Layer 3: AES-256 Encryption        â”‚
        â”‚  â€¢ Military-grade algorithm         â”‚
        â”‚  â€¢ 256-bit key (2^256 combinations) â”‚
        â”‚  â€¢ GCM mode (authenticated)         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Layer 4: UserDefaults              â”‚
        â”‚  â€¢ iOS managed storage              â”‚
        â”‚  â€¢ App sandboxed (isolated)         â”‚
        â”‚  â€¢ Backed up encrypted to iCloud    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                â”‚  Your Data  â”‚
                â”‚  (Protected)â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Attack Scenarios & Protections:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  Scenario 1: Phone is stolen                                   â”‚
â”‚    âœ… Protected by: Device passcode/Face ID                    â”‚
â”‚    Result: Thief can't access any apps or data                â”‚
â”‚                                                                 â”‚
â”‚  Scenario 2: App backup extracted                              â”‚
â”‚    âœ… Protected by: iCloud encryption + AES-256                â”‚
â”‚    Result: Backup data is encrypted, useless without key      â”‚
â”‚                                                                 â”‚
â”‚  Scenario 3: Storage directly accessed (jailbreak)             â”‚
â”‚    âœ… Protected by: AES-256 encryption                         â”‚
â”‚    Result: Data is gibberish without encryption key           â”‚
â”‚                                                                 â”‚
â”‚  Scenario 4: Encryption key extraction attempt                 â”‚
â”‚    âœ… Protected by: iOS Keychain + Secure Enclave              â”‚
â”‚    Result: Key never leaves secure hardware                   â”‚
â”‚                                                                 â”‚
â”‚  Scenario 5: Code analysis / reverse engineering               â”‚
â”‚    âœ… Protected by: No hardcoded secrets, strong algorithms    â”‚
â”‚    Result: Can see how encryption works, but no keys/data     â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Network vs Local Architecture Comparison

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           TRADITIONAL APP (With Backend)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚          â”‚  HTTPS Requests          â”‚          â”‚
    â”‚  iPhone  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Server  â”‚
    â”‚   App    â”‚  (Data travels network)  â”‚(Backend) â”‚
    â”‚          â”‚                          â”‚          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â†‘                                     â”‚
         â”‚                                     â”‚
         â”‚ Local cache only                   â”‚ Main storage
         â”‚ (temporary)                         â”‚
         â”‚                                     â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Limited  â”‚                          â”‚ Database â”‚
    â”‚  Data    â”‚                          â”‚(All data)â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Pros:
  âœ… Cross-device sync
  âœ… Online backup
  âœ… Multi-user features
  âœ… Analytics possible

Cons:
  âŒ Requires internet
  âŒ Privacy concerns (data on server)
  âŒ Server costs
  âŒ Security vulnerabilities (network, server)
  âŒ Latency (network delays)
  âŒ Compliance harder (HIPAA)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           STRESSMIND (Local-Only)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚          â”‚
    â”‚  iPhone  â”‚  NO network requests
    â”‚   App    â”‚  (Except tel:// for calls)
    â”‚          â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ All operations local
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Complete â”‚
    â”‚   Data   â”‚
    â”‚(Encrypted)â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Pros:
  âœ… Works 100% offline
  âœ… Maximum privacy (data never leaves device)
  âœ… No server costs
  âœ… Fast (no network latency)
  âœ… Simple architecture
  âœ… HIPAA compliant (easier)
  âœ… No data breaches possible (no server to hack)

Cons:
  âŒ No cross-device sync
  âŒ No online backup (user must export manually)
  âŒ Single device only
  âŒ No analytics (privacy trade-off)
```

---

## Summary: How It All Works Together

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      THE BIG PICTURE                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Teen opens app
   â†“
2. StressMindApp.swift starts
   â†“
3. ContentView shows 5 tabs
   â†“
4. Teen navigates to Mood tab
   â†“
5. MoodTrackerView loads
   â”œâ”€ Asks DataManager for moodEntries
   â”œâ”€ DataManager checks UserDefaults
   â”œâ”€ Finds encrypted data
   â”œâ”€ Gets encryption key from Keychain
   â”œâ”€ Decrypts data with AES-256
   â”œâ”€ Returns [MoodEntry] array
   â””â”€ MoodTrackerView displays list
   â†“
6. Teen taps "+ Add Mood"
   â†“
7. AddMoodView sheet opens
   â†“
8. Teen fills form and taps "Save"
   â†“
9. Creates new MoodEntry object
   â†“
10. Calls dataManager.addMoodEntry(entry)
    â”œâ”€ Adds to @Published moodEntries array
    â”œâ”€ Triggers SwiftUI update (view rebuilds)
    â”œâ”€ Converts array to JSON
    â”œâ”€ Encrypts with AES-256
    â””â”€ Saves to UserDefaults
    â†“
11. Sheet closes
    â†“
12. MoodTrackerView shows new entry
    â†“
13. Data is safe, encrypted, and private!


KEY PRINCIPLES:

ğŸ”’ SECURITY:
   â€¢ Every save = encrypted
   â€¢ Every load = decrypted
   â€¢ Key never exposed
   â€¢ Data never leaves device

âš¡ PERFORMANCE:
   â€¢ SwiftUI compiles to native code
   â€¢ Views update automatically
   â€¢ Only rebuild what changed
   â€¢ <1s for panic button

ğŸ“± USER EXPERIENCE:
   â€¢ Intuitive navigation
   â€¢ Immediate feedback
   â€¢ Works offline
   â€¢ Accessible to all

ğŸ¯ ARCHITECTURE:
   â€¢ Clean separation (MVVM)
   â€¢ Single source of truth (Singleton)
   â€¢ Reactive updates (@Published)
   â€¢ Type-safe (Swift)
```

---

## Conclusion

You now understand:
- âœ… How the app is structured (files and folders)
- âœ… How data flows through the system
- âœ… How encryption protects privacy
- âœ… How SwiftUI makes views reactive
- âœ… How MVVM separates concerns
- âœ… How performance is optimized
- âœ… How security layers protect data

**Next Steps**:
1. Read `THUNKABLE_PORTING_GUIDE.md` if rebuilding in Thunkable
2. Read `IMPLEMENTATION_CHECKLIST.md` for launch plan
3. Review code files with new understanding
4. Start building or customizing!

---

**Questions?** Review specific sections or ask for clarification on any concept.
